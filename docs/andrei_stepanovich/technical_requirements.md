# 1. Цель проекта

Цель проекта — разработать вирутального помощника по документообороту, 
в виде Telegram бота. Которому можно будет отправлять файлы, находить 
нужные документы внутри чата, а также давать простые команды. Робот работает
с системой docs.wordok.by скажет дубликат в виде помощника, системы.


# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

1. Подключение к телеграму, авторизация
2. Команды для пользователя
3. Список команд Telegram и их функционал

## 2.1. Типы пользователей

Система предусматривает один тип пользователей системы: пользователь.
Пользователь может загружать документы в рамках зарегистрированного аккаунта,
а также находить необходимый документ, по командам, с помощью Telegram чата.


## 2.2. Подключение к телеграму, авторизация

Аутентификация автора и подписчиков осуществляется по email и одноразовому
паролю 


## 2.3. Список команд Telegram и их функционал

Пользователь после аутентификации (подключения к телеграм боту) получает доступ к 
командам. Этот функционал состоит из
следующих команд:

```
1. /go - Бери в работу
2. /search - Найти по тегу
3. /edit - Изменить документ
4. /report - Отчет за период (дата от-до)
```

## 2.3.1. Загрузка документов - Команда "Бери в работу"

Данный блок имеет собой дополнительную функциональность, которая состоит из:

1. Сообщение в виде ответа на классификатор
2. Команда "/ok - Все хорошо"

Загрузка документов осуществляется с помощью чата, пользователю необходимо 
отправить документы в чат, а также сообщить роботу, что документы загружены 
и можно начать их обрабатывать. Сообщить роботу о том что документы можно 
принимать в обработку можно с помощью команды "/go - Бери в работу".

При загрузке документов группой или по отдельности, они должны сохранятся в 
базе под режимом ожидания, чтобы после команды сервер смог быстро взять их в работу.

Когда отправлена команда роботу, должен вызываться хук который делает из базы выборку всех 
документов, и начать выполнять функции, которые сделаны с помощью самого проекта.
После отправки команды, робот должен отвечать что он принял в работу, а также уведомлять
о статусе работы, в случае если ошибка, предлагать ссылку для редактирования.
Если успешно, сообщать о количестве документов и классов которые оно распознало, и ссылкой для редактирования
В случае если пользователь отправил команду "/ok - Все хорошо", тогда робот делает второй шаг, 
после классификации, извлекает нужную информацию


### 2.3.1.1. Сообщение в виде ответа на классификатор

После успешного распознавания, мы пишем пользователю сообщение об успехе, а также в виде 
списка отправляет классы которые оно смогло распознать, категорию документа, и количество файлов
в данной категории. Пример сообщения:

```
Документы сохранены, вот список документов которые удалось распознать:
 - CMR - 1 шт.
 - Счет-Фактура - 1 шт.
 - РЖД - 4 шт.
 
Категория задачи: РЖД форма.
Редактировать класс можно по этой ссылке: http://docs.wordok.by/tasks/?=???

Чтобы отправить файлы на следующий файл обработки, отправь команду "/ok - Все хорошо"
```


### 2.3.1.2. Команда "/ok - Все хорошо"

Данная команда подтвержает серверу о том что можно выполнять функцию извлечения информации


## 2.3.2. Поиск документа по тегам - Команда "Найти по тегу"

Когда документы загружены в чат, на стороне сервера должен вызываться хук


## 2.3.3. Редактирование документа - Команда "Изменить документ"

Когда документы загружены в чат, на стороне сервера должен вызываться хук


## 2.3.4. Генерация отчета, документов в архив за период - Команда "Отчет за период (дата от-до)"

Когда документы загружены в чат, на стороне сервера должен вызываться хук
сделать для начала бота, который будет просто принимать файлы, сохранять их уже в базу и ставить в очередь. От телеги,  и давай уже ответ.
Быстренько запилить

пока получить метрики от Саши, тоесть посмтреть файлы которые она отправляет, команды продумать


